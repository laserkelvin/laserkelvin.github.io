<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/css/franklin.css"> <link rel=stylesheet  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/fontawesome.min.css" integrity="sha384-jLKHWM3JRmfMU0A5x5AkjWkw/EYfGUAGagvnfryNV3F9VqM98XiIH7VBGVoxVSc7" crossorigin=anonymous > <link rel=stylesheet  href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css"> <link rel=stylesheet  href="/css/tufte.css"> <link rel=stylesheet  href="/css/latex.css"> <link rel=stylesheet  href="/css/adjust.css"> <link rel=icon  href="/assets/favicon.ico"> <title>Introducing version control to scientists</title> <div id=layout > <div id=menu > <ul> <li><a href="/">Home</a> <li><a href="/blog/">Blog</a> <li><a href="/projects/">Projects</a> <li><a href="/resume/">CV</a> <li><a href="/about/">About me</a> </ul> </div> <div id=main > <div class=franklin-content ><h1 id=a_conceptual_and_practical_introduction_to_version_control ><a href="#a_conceptual_and_practical_introduction_to_version_control" class=header-anchor >A Conceptual and Practical introduction to version control</a></h1> <h3 id=for_the_dedicated_scientist ><a href="#for_the_dedicated_scientist" class=header-anchor >For the dedicated scientist</a></h3> <p>I would say that the majority of modern science benefits significantly from open-source programs: routines that are freely available for research use, including a transparent code base allowing you to freely inspect and modify it for your own purposes. The great thing with this kind of paradigm is that you can benefit from open-source, and others can benefit from <em>your</em> code being open-source&mdash;anyone can stand on your shoulders&#33; ðŸ˜ƒ</p> <p>I wrote this post as a means to help scientists to open up their source, and as a general guide to how one can contribute code to an existing Github repository. I don&#39;t assume much knowledge, and I&#39;ll leave notes on the margin for additional context/explanations outside the main body of text. As always, you can always drop me a line on Twitter or email me&#33;</p> <p>This article is dedicated to Professor Timothy Barnum&mdash;you owe me a Dunkaccino</p> <h2 id=what_is_git ><a href="#what_is_git" class=header-anchor >What is <code>git</code>?</a></h2> <p>The first thing is to define some nomenclature: likely if you&#39;re looking at this post, you&#39;ll have heard <code>git</code> and Github used, and because the latter contains the former, maybe to an extent confused as to when the two can be used interchangably.</p> <p>To clarify, <code>git</code>&mdash;as the type used implies&mdash;refers to a <a href="https://en.wikipedia.org/wiki/Git">program</a>: it&#39;s a program for managing software versions that was developed as a successor to <code>svm</code> by Linus Torvalds, who is the creator of Linux. As such, most modern UNIX based operating systems will come with <code>git</code> installed. Github, on the other hand, is a cloud platform now owned by Microsoft that serves as an online location where you can host your code repositories <label for=sn-repo  class="margin-toggle sidenote-number"></label> <input type=checkbox  id=mn-repo  class=margin-toggle /> <span class=sidenote  id=sn-repo >A repository can be thought of as a project&mdash;it should house all of the things related to that project, including documentation, a description of the code, citation information where relevant, and of course the codebase.</span> , and has grown now to include a lot of nifty automated workflows that lifts a lot of manual work from modern coding like testing, publishing, and hosting. You can use <code>git</code> independently of Github, and indeed there are alternatives: you can always <a href="https://gogs.io/">host your own repository service</a>, or use alternatives like <a href="https://gitlab.com">GitLab</a>.</p> <h2 id=why_do_i_need_git_in_my_life ><a href="#why_do_i_need_git_in_my_life" class=header-anchor >Why do I need <code>git</code> in my life?</a></h2> <p>So how does <code>git</code> benefit scientists? Primarily I see two aspects: first, you can manage&mdash;with relative ease <label for=sn-lol  class="margin-toggle sidenote-number"></label> <input type=checkbox  id=mn-lol  class=margin-toggle /> <span class=sidenote  id=sn-lol >At least better than copy pasting a file and appending `v6_final.py` everytime</span> &mdash;versions of the code you&#39;ve written, be it scripts for analyzing data for a specific project, or a general purpose framework like <code>numpy</code>, which lends to scientific reproducibility; second, you can collaborate with your peers, your community, and potentially anyone in the world. The possibility that a project you came up with has the potential to grow into something even you couldn&#39;t fathom excites me.</p> <p>Conceptually, <code>git</code> works by thinking of versions of your code as a tree that grows up:</p> <p><img src="/assets/posts/2021-10/github-tree-1.svg" alt="" /></p> <p>Here, the circles refer to <em>branches</em> <label for=sn-1  class="margin-toggle sidenote-number"></label> <input type=checkbox  id=mn-1  class=margin-toggle /> <span class=sidenote  id=sn-1 >You can think of a branch as a spinoff of the code at a particular point in time: we isolate it so we can work on new things, or just to use it as a point of reference in time. The `main` branch is the typical default name, although in older repositories/`git` versions, it was called `master` branch.</span> , each of the rectangles contains a <em>commit</em> <label for=sn-2  class="margin-toggle sidenote-number"></label> <input type=checkbox  id=mn-2  class=margin-toggle /> <span class=sidenote  id=sn-2 >A commit refers to the point codebase that is "saved" in time.</span> , and the arrows indicate the direction of travel between versions. </p> <p>In the example above, we started off with a codebase, and decided to start using <code>git</code> to track changes we make. We&#39;ve since added a new feature, fixed what we thought was a typo that turned out to be correct, thereby reverting back to the new feature commit. The fact that this is progressing linearly in one direction means that we can keep track of <em>everything</em> we&#39;ve done with the code.</p> <p>Now say someone else wants to help develop your code, perhaps to implement a feature that was useful for their analysis and thought it was helpful for others as well. The proper way to do so involves making a <em>fork</em>:</p> <p><img src="/assets/posts/2021-10/github-tree-2.svg" alt="" /></p> <p>As seen in the diagram above, a fork <label for=sn-3  class="margin-toggle sidenote-number"></label> <input type=checkbox  id=mn-3  class=margin-toggle /> <span class=sidenote  id=sn-3 >A fork is similar to "clone", but differs in that it recreates the repository entirely managed by you and you alone. Because you own the repository, you have full read/write access; conversely, cloning does not give you the same rights. This is important because it means you cannot easily mess up a common code base&mdash;there's shared responsibilities! If this doesn't make sense to you, move on and come back to this note after reading the whole post.</span> basically copies all of the code and history from the point in time you performed the action. </p> <p><img src="/assets/posts/2021-10/github-tree-3.svg" alt="" /></p> <p>You then make the changes that you wanted, and you commit them &#40;&quot;Cool new feature&quot;&#41;. At this point, you&#39;ve diverged from the original repository by one commit. With vanilla <code>git</code>, if you know the author of the original code you could now <em>merge</em> the codebases, and bring the original up to speed with all of the new code. The common way to do so is called a <em>pull request</em>&mdash;it&#39;s named quite oddly, and so probably deserves some extra attention. <label for=sn-merge-pr  class="margin-toggle sidenote-number"></label> <input type=checkbox  id=mn-merge-pr  class=margin-toggle /> <span class=sidenote  id=sn-merge-pr >To clarify, merging branches is a general term for combining branches of code together. A pull request (PR) specifically asks for the owner of another repository to merge *your* changes to their branch.</span> The name originates from the <code>git</code> command, <code>git request-pull</code> which makes a bit more sense: you ask the owner of another repository to <em>pull</em> the changes <a href="https://git-scm.com/docs/git-request-pull">from your branch to theirs</a>.</p> <p>While this example is about as simple as it gets, the main power of <code>git</code> is to recognize which parts of the code is independent of the incoming changes. For example, you might work to add some &#40;very important&#41; documentation in your code, and providing the incoming changes don&#39;t modify the existing codebase in any way, you&#39;ll be able to work on separate things and still merge them seamlessly:</p> <p><img src="/assets/posts/2021-10/github-tree-4.svg" alt="" /></p> <p>Even if there are conflicting changes, you can still manually sort through them, and choose which version to keep in the new commit. It might be a bit clumsy in command line to do, but it is possible and other interfaces <label for=sn-allthegit  class="margin-toggle sidenote-number"></label> <input type=checkbox  id=mn-allthegit  class=margin-toggle /> <span class=sidenote  id=sn-allthegit >Including working with the online Github interface, a desktop app like GitKraken, or built-in interfaces in code editors like VS Code.</span> can make this more palatable.</p> <h1 id=a_working_example ><a href="#a_working_example" class=header-anchor >A working example</a></h1> <p>Now the example above would work, but it&#39;s not particularly convenient for you and your collaborator to have to work together to merge the codebase. Services like Github act as a third-party that can perform these tasks asynchronously, and with modern Github, automate a lot of work that might exist for particularly complex codebases. <label for=sn-complexity  class="margin-toggle sidenote-number"></label> <input type=checkbox  id=mn-complexity  class=margin-toggle /> <span class=sidenote  id=sn-complexity >As you might imagine, as your codebase gets increasingly complex, and if more people are involved, it's pretty hard to get everyone together in a room to agree on what changes can be merged and what needs to be revised! That said, it IS possible to do all of these things without a GUI!</span> So, in the interest of providing some practical elements to this post, we&#39;ll look at an example workflow of using <code>git</code> &#40;the program&#41; on your computer to make changes to an existing codebase/repository hosted on Github.</p> <ol> <li><p>Fork the repository you want to work on in Github:</p> </ol> <p><img src="/assets/posts/2021-10/github-fork.png" alt="" /></p> <ol start=2 > <li><p>Clone the repository to your computer; we want to make modifications locally. <label for=sn-ssh  class="margin-toggle sidenote-number"></label> <input type=checkbox  id=mn-ssh  class=margin-toggle /> <span class=sidenote  id=sn-ssh >Keep in mind, the best way to clone is to use SSH keys&mdash;downloading the zip does not include the extra files that store git repository information, and HTTPS is going to be phased out. A simple alternative is to use a UI like GitKraken or the Github desktop app to do this step.</span> </p> </ol> <p><img src="/assets/posts/2021-10/github-clone.png" alt="" /></p> <ol start=3 > <li><p>Make the changes you want to files, remembering to keep modifications small between commits, and commit frequently. You will <code>git add</code> files to add them to a stack of files you&#39;ll commit, followed by <code>git commit</code> to write a descriptive summary of the things you&#39;ve changed.</p> </ol> <p>It&#39;s probably good to have a mental picture of what the current state of affairs are:</p> <p><img src="/assets/posts/2021-10/git-relationships.svg" alt="" /></p> <p>We forked the code from the original repository on Github, cloned the code from our fork, and made changes locally on our computer. We can <em>push</em> our changes back up to our forked repository, to bring the Github version of our code up to the date. <label for=sn-dropbox  class="margin-toggle sidenote-number"></label> <input type=checkbox  id=mn-dropbox  class=margin-toggle /> <span class=sidenote  id=sn-dropbox >I guess this is kind of like syncing Dropbox up to the cloud?</span> Keep in mind, if <code>git push</code> doesn&#39;t work, it&#39;s likely because you haven&#39;t set the &quot;upstream&quot; remote&mdash;<code>git</code> doesn&#39;t know where to send the changes to: either because there are no remotes set &#40;<code>git remote add &lt;remote name&gt; &lt;link&gt;</code>&#41;, or because you haven&#39;t set an upstream remote yet &#40;<code>git push --set-upstream &lt;remote name&gt; &lt;branch&gt;</code>&#41;. Note that <code>&lt;remote name&gt;</code> by default is <code>origin</code>&mdash;this is set if you cloned the repository through the proper means ðŸ˜‰. The whole procedure, in command line, looks like this:</p> <p><img src="/assets/posts/2021-10/local-git.png" alt="" /></p> <ol start=4 > <li><p>If this step was succesful, you should see changes reflected on Github&#33; Notably, you&#39;ll see this banner about a pull request at the top:</p> </ol> <p><img src="/assets/posts/2021-10/show-pr.png" alt="" /></p> <ol start=5 > <li><p>If you were to click on &quot;Compare &amp; pull request, you are then shown this dialog:</p> </ol> <p><img src="/assets/posts/2021-10/make-pr.png" alt="" /></p> <p>What will be shown in the arrow direction will differ for your scenario: if you perform a pull request from a fork, you&#39;ll have the option to send the pull request to the owner of the original repository. You should write something descriptive about what is included in your changes, and maintainers of the base repository will review your changes, maybe ask for additional changes, and then &#40;hopefully&#41; merge them into the original codebase.</p> <h1 id=appendix ><a href="#appendix" class=header-anchor >Appendix</a></h1> <p>For your convenience, a table of terms used in <code>git</code> related version control.</p> <table><tr><th align=right >Term<th align=right >Description<tr><td align=right >Branch<td align=right >A spinoff of the codebase at a certain point in time<tr><td align=right >Commit<td align=right >The act of <em>committing</em> your changes to the version history<tr><td align=right >Pull request<td align=right >To ask the owner of another repository to pull changes from your repository<tr><td align=right >Merge<td align=right >To combine two branches together<tr><td align=right >Revert<td align=right >To go back to an earlier commit<tr><td align=right >Checkout<td align=right >Generally used to revert changes on a file to the last commit. Alternatively with <code>-b</code>, change to a new branch</table> <div class=page-foot > <div class=copyright > &copy; Kelvin Lee. Last modified: May 31, 2023. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and <a href="https://julialang.org">Julia</a>. </div> </div> </div> </div> </div>